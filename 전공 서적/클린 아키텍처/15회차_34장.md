# 34장, 빠져있는 장

### 계층 기반 패키지

* 코드가 하는 일에 기반해 코드를 분할한다.
* 계층 (패키지) 사이의 의존성은 모두 아래를 향한다.


### 기능 기반 패키지

* 서로 연관된 기능, 도메인 개념, 또는 Aggregate Root에 기반하여 수직의 얇은 조각으로 코드를 분할한다.
    * [Aggregate Root](https://medium.com/@SlackBeck/%EC%95%A0%EA%B7%B8%EB%A6%AC%EA%B2%8C%EC%9E%87-%ED%95%98%EB%82%98%EC%97%90-%EB%A6%AC%ED%8C%8C%EC%A7%80%ED%86%A0%EB%A6%AC-%ED%95%98%EB%82%98-f97a69662f63)

### 포트와 어댑터

* 업무/도메인에 초점을 둔 코드가 프레임워크나 데이터베이스같은 세부 구현과 독립적인 아키텍처를 만들기위해 제시
* 외부(세부사항)가 내부(업무/도메인)에 의존하며 절대 그 반대로는 안된다.

### 컴포넌트 기반 패키지

* 계층형 아키텍처에는 속임수를 써서 몇몇 의존성을 의도치 않은 방식으로 추가해도, 보기에 좋은 비순환 의존성 그래프가 생성된다
* 큰 단위의 단일 컴포넌트와 관련된 모든 책임을 하나의 패키지로 묶는데 주안점을 둔다

### 결론

* 최적의 설계를 꾀했더라도, 구현 전략에 얽힌 복잡함을 고려하지않으면 설계가 망가질수있다.
* 선택된 아키텍처 스타일을 강제하는 데 컴파일러의 도움을 받을수있을지 고민하라
    * Rider
    * 비주얼스튜디오 빠른 리팩터링 단축키

